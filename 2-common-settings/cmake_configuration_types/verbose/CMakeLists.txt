cmake_minimum_required(VERSION 3.5)
project(x)
get_property(generator_is_multi_config GLOBAL PROPERTY GENERATOR_IS_MULTI_CONFIG)
if(generator_is_multi_config)
  message(STATUS "Using multi-config generator")
  message(STATUS "CMAKE_CONFIGURATION_TYPES: ${CMAKE_CONFIGURATION_TYPES}")
  if(CMAKE_CONFIGURATION_TYPES MATCHES "Debug;Release;MinSizeRel;RelWithDebInfo|Debug;Release;RelWithDebInfo")
    set(CMAKE_CONFIGURATION_TYPES "Debug;Release")
    message(STATUS "overwrite default CMAKE_CONFIGURATION_TYPES with: ${CMAKE_CONFIGURATION_TYPES}")
  else()
    message(STATUS "use user defined CMAKE_CONFIGURATION_TYPES: ${CMAKE_CONFIGURATION_TYPES}")
  endif()
else()
  message(STATUS "Using single-config generator")
  message(STATUS "CMAKE_BUILD_TYPE: ${CMAKE_BUILD_TYPE}")
  set(MY_DEFAULT_BUILD_TYPE "Release")
  if(NOT CMAKE_BUILD_TYPE)
    set(CMAKE_BUILD_TYPE "${MY_DEFAULT_BUILD_TYPE}")
    message(STATUS "overwrite default CMAKE_BUILD_TYPE with: ${CMAKE_BUILD_TYPE}")
  endif()
endif()
unset(generator_is_multi_config)
